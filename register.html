<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Register CNM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>

‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô...

<script>
/* ================= CONFIG ================= */
const LIFF_ID = = "2008736700-X7cUjaUv";

/* Google Form (‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) */
const FORM_URL =
  "https://docs.google.com/forms/d/e/1FAIpQLScnxbS7laYzC0x3locjp6_UxI9ELu37ywcTOcMXsmzggKng/viewform";

/* üî• entry ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å DevTools */
const ENTRY_LINE_USER_ID = "entry.1707622273";
/* ========================================= */

async function start() {
  try {
    await liff.init({ liffId: LIFF_ID });

    if (!liff.isLoggedIn()) {
      liff.login();
      return;
    }

    const profile = await liff.getProfile();

    const userId = profile.userId;

    if (!userId) {
      alert("‡πÑ‡∏°‡πà‡∏û‡∏ö LINE User ID");
      return;
    }

    const url =
      FORM_URL +
      "?" +
      ENTRY_LINE_USER_ID +
      "=" +
      encodeURIComponent(userId);

    // redirect ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
    window.location.replace(url);

  } catch (err) {
    console.error(err);
    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°");
  }
}

start();
</script>

</body>
</html>
